package garage.controller;

import garage.database.Database;
import garage.model.*;

public class Controller {
	private static int USERNAME_LENGTH = 10;
	private static int PASSWORD_LENGTH = 4;
	Database database;
	KeyPadBuffer buffer;
	
	public void Controller(Database database) {
		this.database = database;
		buffer = new KeyPadBuffer(USERNAME_LENGTH, this);
	}

	private String usernameInput = "";
	
	public void recieveBuffer(String input) {
		if (input.length() == USERNAME_LENGTH) {
			newUsernameInput(input);
		} else {
			newPasswordInput(input);
		}
	}
	
	private void newUsernameInput(String username) {
		if (database.userExists(username)) {
			usernameInput = username;
			buffer.setExpectedInput(PASSWORD_LENGTH);
			//TODO Green led lights up
		} else {
			usernameInput = "";
			//TODO Red led lights up
		}
	}
	
	private void newPasswordInput(String password) {
		
	}
}
